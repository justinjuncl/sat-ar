<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>SAT-AR</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }

      #compass {
        width:100%;
        transform-origin: 50% 50%;
        -webkit-transform-origin: 50% 50%;
        -moz-transform-origin: 50% 50%;
      }



		</style>



	</head>
	<body onload="initComp">
		<script src="lib/three.min.js"></script>
		<script src="lib/satellite.js"></script>

		<script src="lib/DeviceOrientationControls.js"></script>
		<script src="lib/PointerLockControls.js"></script>

		<script src="model/Observer.js"></script>
		<script src="model/SatelliteRecord.js"></script>

		<script src="main.js"></script>

		<script>

function initComp() {
        var compass = document.getElementById('compass');
        if(window.DeviceOrientationEvent) {
  
          window.addEventListener('deviceorientation', function(event) {
                var alpha;
                //Check for iOS property
                if(event.webkitCompassHeading) {
                  alpha = event.webkitCompassHeading;
                  //Rotation is reversed for iOS
                  compass.style.WebkitTransform = 'rotate(-' + alpha + 'deg)';
                }
                //non iOS
                else {
                  alpha = event.alpha;
                  webkitAlpha = alpha;
                  if(!window.chrome) {
                    //Assume Android stock (this is crude, but good enough for our example) and apply offset
                    webkitAlpha = alpha-270;
                  }
                }
 
                compass.style.Transform = 'rotate(' + alpha + 'deg)';
                compass.style.WebkitTransform = 'rotate('+ webkitAlpha + 'deg)';
                //Rotation is reversed for FF
                compass.style.MozTransform = 'rotate(-' + alpha + 'deg)'; 
              }, false);
        }
      }

		</script>

    <div id="compassContainer">
      <img src="compass.jpg" id="compass"/>
    </div>

	</body>
</html>